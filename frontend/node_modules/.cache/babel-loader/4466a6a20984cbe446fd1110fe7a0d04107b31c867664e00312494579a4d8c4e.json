{"ast":null,"code":"import { cloneDeep } from '@swagger-api/apidom-core';\nimport NormalizeStorage from \"./normalize-header-examples/NormalizeStorage.mjs\";\n/**\n * Override of Schema.example and Schema.examples field inside the Parameter Objects.\n *\n * Parameter Object has two fixed fields:\n *  - `example` of type `Any`\n *  - `examples` of type `Map[string, Example Object | Reference Object]`\n *\n * OpenAPI 3.1 specification excerpt that defines the override behavior:\n *\n * The example value SHALL override the example provided by the schema.\n * Furthermore, if referencing a schema that contains an example, the examples value SHALL override the example provided by the schema.\n *\n * NOTE: this plugin is idempotent\n */\nconst plugin = ({\n  storageField = 'x-normalized'\n} = {}) => toolbox => {\n  const {\n    predicates,\n    ancestorLineageToJSONPointer\n  } = toolbox;\n  let storage;\n  return {\n    visitor: {\n      OpenApi3_1Element: {\n        enter(element) {\n          storage = new NormalizeStorage(element, storageField, 'parameter-examples');\n        },\n        leave() {\n          storage = undefined;\n        }\n      },\n      ParameterElement: {\n        leave(parameterElement, key, parent, path, ancestors) {\n          var _parameterElement$sch, _parameterElement$sch2;\n          // skip visiting this Parameter Object\n          if (ancestors.some(predicates.isComponentsElement)) {\n            return;\n          }\n\n          // no Parameter.schema field present\n          if (typeof parameterElement.schema === 'undefined' || !predicates.isSchemaElement(parameterElement.schema)) {\n            return;\n          }\n          // Schema contains no example\n          if (typeof ((_parameterElement$sch = parameterElement.schema) === null || _parameterElement$sch === void 0 ? void 0 : _parameterElement$sch.example) === 'undefined' && typeof ((_parameterElement$sch2 = parameterElement.schema) === null || _parameterElement$sch2 === void 0 ? void 0 : _parameterElement$sch2.examples) === 'undefined') {\n            return;\n          }\n          const parameterJSONPointer = ancestorLineageToJSONPointer([...ancestors, parent, parameterElement]);\n\n          // skip visiting this Parameter Object if it's already normalized\n          if (storage.includes(parameterJSONPointer)) {\n            return;\n          }\n\n          /**\n           * Parameter.examples and Schema.examples have preferences over the older\n           * and deprected `example` field.\n           */\n          if (typeof parameterElement.examples !== 'undefined' && predicates.isObjectElement(parameterElement.examples)) {\n            // @ts-ignore\n            const examples = parameterElement.examples.map(example => {\n              return cloneDeep.safe(example.value);\n            });\n            if (typeof parameterElement.schema.examples !== 'undefined') {\n              parameterElement.schema.set('examples', examples);\n              storage.append(parameterJSONPointer);\n            }\n            if (typeof parameterElement.schema.example !== 'undefined') {\n              parameterElement.schema.set('example', examples[0]);\n              storage.append(parameterJSONPointer);\n            }\n            return;\n          }\n\n          /**\n           * Handle deprecated `example` field.\n           */\n          if (typeof parameterElement.example !== 'undefined') {\n            if (typeof parameterElement.schema.examples !== 'undefined') {\n              parameterElement.schema.set('examples', [cloneDeep(parameterElement.example)]);\n              storage.append(parameterJSONPointer);\n            }\n            if (typeof parameterElement.schema.example !== 'undefined') {\n              parameterElement.schema.set('example', cloneDeep(parameterElement.example));\n              storage.append(parameterJSONPointer);\n            }\n          }\n        }\n      }\n    }\n  };\n};\nexport default plugin;","map":{"version":3,"names":["cloneDeep","NormalizeStorage","plugin","storageField","toolbox","predicates","ancestorLineageToJSONPointer","storage","visitor","OpenApi3_1Element","enter","element","leave","undefined","ParameterElement","parameterElement","key","parent","path","ancestors","_parameterElement$sch","_parameterElement$sch2","some","isComponentsElement","schema","isSchemaElement","example","examples","parameterJSONPointer","includes","isObjectElement","map","safe","value","set","append"],"sources":["/home/mikezvz/Documents/GitHub/InsuranceCalculator/frontend/node_modules/@swagger-api/apidom-ns-openapi-3-1/es/refractor/plugins/normalize-parameter-examples.mjs"],"sourcesContent":["import { cloneDeep } from '@swagger-api/apidom-core';\nimport NormalizeStorage from \"./normalize-header-examples/NormalizeStorage.mjs\";\n/**\n * Override of Schema.example and Schema.examples field inside the Parameter Objects.\n *\n * Parameter Object has two fixed fields:\n *  - `example` of type `Any`\n *  - `examples` of type `Map[string, Example Object | Reference Object]`\n *\n * OpenAPI 3.1 specification excerpt that defines the override behavior:\n *\n * The example value SHALL override the example provided by the schema.\n * Furthermore, if referencing a schema that contains an example, the examples value SHALL override the example provided by the schema.\n *\n * NOTE: this plugin is idempotent\n */\nconst plugin = ({\n  storageField = 'x-normalized'\n} = {}) => toolbox => {\n  const {\n    predicates,\n    ancestorLineageToJSONPointer\n  } = toolbox;\n  let storage;\n  return {\n    visitor: {\n      OpenApi3_1Element: {\n        enter(element) {\n          storage = new NormalizeStorage(element, storageField, 'parameter-examples');\n        },\n        leave() {\n          storage = undefined;\n        }\n      },\n      ParameterElement: {\n        leave(parameterElement, key, parent, path, ancestors) {\n          var _parameterElement$sch, _parameterElement$sch2;\n          // skip visiting this Parameter Object\n          if (ancestors.some(predicates.isComponentsElement)) {\n            return;\n          }\n\n          // no Parameter.schema field present\n          if (typeof parameterElement.schema === 'undefined' || !predicates.isSchemaElement(parameterElement.schema)) {\n            return;\n          }\n          // Schema contains no example\n          if (typeof ((_parameterElement$sch = parameterElement.schema) === null || _parameterElement$sch === void 0 ? void 0 : _parameterElement$sch.example) === 'undefined' && typeof ((_parameterElement$sch2 = parameterElement.schema) === null || _parameterElement$sch2 === void 0 ? void 0 : _parameterElement$sch2.examples) === 'undefined') {\n            return;\n          }\n          const parameterJSONPointer = ancestorLineageToJSONPointer([...ancestors, parent, parameterElement]);\n\n          // skip visiting this Parameter Object if it's already normalized\n          if (storage.includes(parameterJSONPointer)) {\n            return;\n          }\n\n          /**\n           * Parameter.examples and Schema.examples have preferences over the older\n           * and deprected `example` field.\n           */\n          if (typeof parameterElement.examples !== 'undefined' && predicates.isObjectElement(parameterElement.examples)) {\n            // @ts-ignore\n            const examples = parameterElement.examples.map(example => {\n              return cloneDeep.safe(example.value);\n            });\n            if (typeof parameterElement.schema.examples !== 'undefined') {\n              parameterElement.schema.set('examples', examples);\n              storage.append(parameterJSONPointer);\n            }\n            if (typeof parameterElement.schema.example !== 'undefined') {\n              parameterElement.schema.set('example', examples[0]);\n              storage.append(parameterJSONPointer);\n            }\n            return;\n          }\n\n          /**\n           * Handle deprecated `example` field.\n           */\n          if (typeof parameterElement.example !== 'undefined') {\n            if (typeof parameterElement.schema.examples !== 'undefined') {\n              parameterElement.schema.set('examples', [cloneDeep(parameterElement.example)]);\n              storage.append(parameterJSONPointer);\n            }\n            if (typeof parameterElement.schema.example !== 'undefined') {\n              parameterElement.schema.set('example', cloneDeep(parameterElement.example));\n              storage.append(parameterJSONPointer);\n            }\n          }\n        }\n      }\n    }\n  };\n};\nexport default plugin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}