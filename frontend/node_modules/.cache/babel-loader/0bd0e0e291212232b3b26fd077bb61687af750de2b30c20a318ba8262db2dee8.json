{"ast":null,"code":"import { StringElement } from 'minim';\nimport ShortUniqueId from 'short-unique-id';\nimport ElementIdentityError from \"./errors/ElementIdentityError.mjs\";\nimport { isElement, isStringElement } from \"../predicates/index.mjs\";\nexport class IdentityManager {\n  uuid;\n  identityMap;\n  constructor({\n    length = 6\n  } = {}) {\n    this.uuid = new ShortUniqueId({\n      length\n    });\n    this.identityMap = new WeakMap();\n  }\n  identify(element) {\n    if (!isElement(element)) {\n      throw new ElementIdentityError('Cannot not identify the element. `element` is neither structurally compatible nor a subclass of an Element class.', {\n        value: element\n      });\n    }\n\n    // use already assigned identity\n    if (element.meta.hasKey('id') && isStringElement(element.meta.get('id')) && !element.meta.get('id').equals('')) {\n      return element.id;\n    }\n\n    // assign identity in immutable way\n    if (this.identityMap.has(element)) {\n      return this.identityMap.get(element);\n    }\n\n    // return element identity\n    const id = new StringElement(this.generateId());\n    this.identityMap.set(element, id);\n    return id;\n  }\n  forget(element) {\n    if (this.identityMap.has(element)) {\n      this.identityMap.delete(element);\n      return true;\n    }\n    return false;\n  }\n  generateId() {\n    return this.uuid.randomUUID();\n  }\n}\nexport const defaultIdentityManager = new IdentityManager();","map":{"version":3,"names":["StringElement","ShortUniqueId","ElementIdentityError","isElement","isStringElement","IdentityManager","uuid","identityMap","constructor","length","WeakMap","identify","element","value","meta","hasKey","get","equals","id","has","generateId","set","forget","delete","randomUUID","defaultIdentityManager"],"sources":["/home/mikezvz/Documents/GitHub/InsuranceCalculator/frontend/node_modules/@swagger-api/apidom-core/es/identity/index.mjs"],"sourcesContent":["import { StringElement } from 'minim';\nimport ShortUniqueId from 'short-unique-id';\nimport ElementIdentityError from \"./errors/ElementIdentityError.mjs\";\nimport { isElement, isStringElement } from \"../predicates/index.mjs\";\nexport class IdentityManager {\n  uuid;\n  identityMap;\n  constructor({\n    length = 6\n  } = {}) {\n    this.uuid = new ShortUniqueId({\n      length\n    });\n    this.identityMap = new WeakMap();\n  }\n  identify(element) {\n    if (!isElement(element)) {\n      throw new ElementIdentityError('Cannot not identify the element. `element` is neither structurally compatible nor a subclass of an Element class.', {\n        value: element\n      });\n    }\n\n    // use already assigned identity\n    if (element.meta.hasKey('id') && isStringElement(element.meta.get('id')) && !element.meta.get('id').equals('')) {\n      return element.id;\n    }\n\n    // assign identity in immutable way\n    if (this.identityMap.has(element)) {\n      return this.identityMap.get(element);\n    }\n\n    // return element identity\n    const id = new StringElement(this.generateId());\n    this.identityMap.set(element, id);\n    return id;\n  }\n  forget(element) {\n    if (this.identityMap.has(element)) {\n      this.identityMap.delete(element);\n      return true;\n    }\n    return false;\n  }\n  generateId() {\n    return this.uuid.randomUUID();\n  }\n}\nexport const defaultIdentityManager = new IdentityManager();"],"mappings":"AAAA,SAASA,aAAa,QAAQ,OAAO;AACrC,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,oBAAoB,MAAM,mCAAmC;AACpE,SAASC,SAAS,EAAEC,eAAe,QAAQ,yBAAyB;AACpE,OAAO,MAAMC,eAAe,CAAC;EAC3BC,IAAI;EACJC,WAAW;EACXC,WAAWA,CAAC;IACVC,MAAM,GAAG;EACX,CAAC,GAAG,CAAC,CAAC,EAAE;IACN,IAAI,CAACH,IAAI,GAAG,IAAIL,aAAa,CAAC;MAC5BQ;IACF,CAAC,CAAC;IACF,IAAI,CAACF,WAAW,GAAG,IAAIG,OAAO,CAAC,CAAC;EAClC;EACAC,QAAQA,CAACC,OAAO,EAAE;IAChB,IAAI,CAACT,SAAS,CAACS,OAAO,CAAC,EAAE;MACvB,MAAM,IAAIV,oBAAoB,CAAC,mHAAmH,EAAE;QAClJW,KAAK,EAAED;MACT,CAAC,CAAC;IACJ;;IAEA;IACA,IAAIA,OAAO,CAACE,IAAI,CAACC,MAAM,CAAC,IAAI,CAAC,IAAIX,eAAe,CAACQ,OAAO,CAACE,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAACJ,OAAO,CAACE,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,EAAE;MAC9G,OAAOL,OAAO,CAACM,EAAE;IACnB;;IAEA;IACA,IAAI,IAAI,CAACX,WAAW,CAACY,GAAG,CAACP,OAAO,CAAC,EAAE;MACjC,OAAO,IAAI,CAACL,WAAW,CAACS,GAAG,CAACJ,OAAO,CAAC;IACtC;;IAEA;IACA,MAAMM,EAAE,GAAG,IAAIlB,aAAa,CAAC,IAAI,CAACoB,UAAU,CAAC,CAAC,CAAC;IAC/C,IAAI,CAACb,WAAW,CAACc,GAAG,CAACT,OAAO,EAAEM,EAAE,CAAC;IACjC,OAAOA,EAAE;EACX;EACAI,MAAMA,CAACV,OAAO,EAAE;IACd,IAAI,IAAI,CAACL,WAAW,CAACY,GAAG,CAACP,OAAO,CAAC,EAAE;MACjC,IAAI,CAACL,WAAW,CAACgB,MAAM,CAACX,OAAO,CAAC;MAChC,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd;EACAQ,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACd,IAAI,CAACkB,UAAU,CAAC,CAAC;EAC/B;AACF;AACA,OAAO,MAAMC,sBAAsB,GAAG,IAAIpB,eAAe,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}