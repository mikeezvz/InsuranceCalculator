{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button}from'react-bootstrap';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Account(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{const fetchUserInfo=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/user\"),{credentials:'include'});if(response.ok){const data=await response.json();console.log('User data:',data);setUser(data.username);}else{setUser(null);navigate('/');}}catch(error){console.error('Error checking session:',error);setUser(null);navigate('/');}finally{setLoading(false);}};fetchUserInfo();},[navigate]);useEffect(()=>{if(!loading&&!user){navigate('/');}},[loading,user,navigate]);const handleLogout=async()=>{const response=await fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/logout\"),{method:'DELETE',headers:{'Content-Type':'application/json'},credentials:'include'});if(response.ok){setUser(null);navigate('/');}else{console.error('Logout failed');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"Account\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Account\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Welcome, \",user]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"plandetails\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Plan Details\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:handleLogout,children:\"Logout\"})]});}export default Account;","map":{"version":3,"names":["React","useState","useEffect","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","Account","user","setUser","loading","setLoading","navigate","fetchUserInfo","response","fetch","concat","process","env","REACT_APP_BACKEND_URL","credentials","ok","data","json","console","log","username","error","handleLogout","method","headers","children","className","onClick"],"sources":["/home/mikezvz/Documents/GitHub/InsuranceCalculator/frontend/src/routes/account.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\n\nfunction Account() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/user`, {\n          credentials: 'include'\n        });\n        if (response.ok) {\n          const data = await response.json();\n          console.log('User data:', data);\n          setUser(data.username);\n        } else {\n          setUser(null);\n          navigate('/');\n        }\n      } catch (error) {\n        console.error('Error checking session:', error);\n        setUser(null);\n        navigate('/');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUserInfo();\n  }, [navigate]);\n\n  useEffect(() => {\n    if (!loading && !user) {\n      navigate('/');\n    }\n  }, [loading, user, navigate]);\n\n  const handleLogout = async () => {\n    const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/logout`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include'\n    });\n\n    if (response.ok) {\n      setUser(null);\n      navigate('/');\n    } else {\n      console.error('Logout failed');\n    }\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className='Account'>\n      <h1>My Account</h1>\n      <br/>\n      <h4>Welcome, {user}</h4>\n      <br/>\n      <div className='plandetails'>\n      <h2>Plan Details</h2>\n      </div>\n      <br/>\n      <Button onClick={handleLogout}>Logout</Button>\n    </div>\n  );\n}\n\nexport default Account;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}